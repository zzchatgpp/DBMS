CREATE TABLE Stud_Marks (
roll_no INT PRIMARY KEY,
name VARCHAR(50),
total_marks INT
);

CREATE TABLE Result (
Roll INT PRIMARY KEY,
Name VARCHAR(50),
Class VARCHAR(30)
);

DELIMITER $$

CREATE PROCEDURE proc_Grade()
BEGIN
DECLARE done INT DEFAULT 0;
DECLARE v_roll_no INT;
DECLARE v_name VARCHAR(50);
DECLARE v_total_marks INT;
DECLARE v_class VARCHAR(30);
DECLARE cur CURSOR FOR SELECT roll_no, name, total_marks FROM Stud_Marks;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
OPEN cur;
read_loop: LOOP
FETCH cur INTO v_roll_no, v_name, v_total_marks;
IF done THEN
LEAVE read_loop;
END IF;
IF v_total_marks BETWEEN 990 AND 1500 THEN
SET v_class = 'Distinction';
ELSEIF v_total_marks BETWEEN 900 AND 989 THEN
SET v_class = 'First Class';
ELSEIF v_total_marks BETWEEN 825 AND 899 THEN
SET v_class = 'Higher Second Class';
ELSE
SET v_class = 'Others';
END IF;
INSERT INTO Result(Roll, Name, Class) VALUES (v_roll_no, v_name, v_class);
END LOOP;
CLOSE cur;
END$$

DELIMITER ;

INSERT INTO Stud_Marks VALUES
(101, 'Alice', 1200),
(102, 'Bob', 800),
(103, 'Charlie', 950),
(104, 'David', 1150),
(105, 'Eva', 700);

CALL proc_Grade();
